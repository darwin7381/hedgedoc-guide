# VitePress æ–‡æª”ç«™è¨­ç½®æŒ‡å—

> **å°ˆæ¡ˆ**ï¼šHedgeDoc æ¸¬è©¦æ–‡æª”ç«™  
> **å»ºç«‹æ—¥æœŸ**ï¼š2025-11-06  
> **VitePress ç‰ˆæœ¬**ï¼š1.6.4

---

## ğŸ“‹ ç›®éŒ„

1. [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
2. [é—œéµé…ç½®èªªæ˜](#é—œéµé…ç½®èªªæ˜)
3. [é‡è¦æ•™è¨“èˆ‡æ³¨æ„äº‹é …](#é‡è¦æ•™è¨“èˆ‡æ³¨æ„äº‹é …)
4. [å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ](#å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ)
5. [ç›®éŒ„çµæ§‹](#ç›®éŒ„çµæ§‹)
6. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®‰è£èˆ‡å•Ÿå‹•

```bash
# å®‰è£ä¾è³´
npm install

# é–‹ç™¼æ¨¡å¼ï¼ˆè‡ªå‹•åµæ¸¬å¯ç”¨ç«¯å£ï¼‰
npm run docs:dev

# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run docs:build

# é è¦½ç”Ÿç”¢ç‰ˆæœ¬
npm run docs:preview
```

### è¨ªå•æ–‡æª”ç«™

é–‹ç™¼ä¼ºæœå™¨æœƒè‡ªå‹•å°‹æ‰¾å¯ç”¨ç«¯å£ï¼ˆé€šå¸¸æ˜¯ 5173ã€5174 ç­‰ï¼‰ï¼Œåœ¨çµ‚ç«¯ä¸­æœƒé¡¯ç¤ºå¯¦éš›çš„ URLã€‚

---

## âš™ï¸ é—œéµé…ç½®èªªæ˜

### æ ¸å¿ƒé…ç½®æª”æ¡ˆ

**ä½ç½®**ï¼š`docs/.vitepress/config.ts`

### æœ€é‡è¦çš„é…ç½®ï¼š`markdown.html: false`

```typescript
export default defineConfig({
  markdown: {
    html: false,  // âš ï¸ é—œéµé…ç½®ï¼
    lineNumbers: true,
    theme: {
      light: 'github-light',
      dark: 'github-dark'
    }
  }
})
```

#### ç‚ºä»€éº¼å¿…é ˆè¨­ç½® `html: false`ï¼Ÿ

**å•é¡ŒèƒŒæ™¯**ï¼š
- VitePress é è¨­æœƒå°‡ Markdown æ–‡ä»¶ç·¨è­¯ç‚º Vue çµ„ä»¶
- æ–‡ä»¶ä¸­çš„ HTML æ¨™ç±¤ï¼ˆåŒ…æ‹¬ `<NOTE>`, `<ALIAS>`, `<TAG>` ç­‰ï¼‰æœƒè¢« Vue èª¤èªç‚ºçµ„ä»¶
- å³ä½¿åœ¨ code block ä¸­ï¼ŒæŸäº›æƒ…æ³ä¸‹ä¹Ÿæœƒè¢«éŒ¯èª¤è§£æ
- å°è‡´ç·¨è­¯éŒ¯èª¤ï¼š`Element is missing end tag`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- è¨­ç½® `html: false` ç¦ç”¨ Markdown ä¸­çš„ HTML è§£æ
- é€™æ¨£æ‰€æœ‰ `<...>` æ ¼å¼çš„å…§å®¹éƒ½æœƒè¢«è¦–ç‚ºç´”æ–‡å­—
- **ä¸æœƒå½±éŸ¿**ï¼šcode block èªæ³•é«˜äº®ã€VitePress åŠŸèƒ½çµ„ä»¶ã€å°èˆªã€æœç´¢ç­‰

**å½±éŸ¿ç¯„åœ**ï¼š
- âœ… ä¿ç•™ï¼šMarkdown èªæ³•ã€code blockã€Vue çµ„ä»¶ï¼ˆé€šéæ­£å¸¸æ–¹å¼å¼•å…¥ï¼‰
- âŒ ç¦ç”¨ï¼šåœ¨ Markdown ä¸­ç›´æ¥å¯« HTML æ¨™ç±¤ï¼ˆå¦‚ `<div>`, `<span>` ç­‰ï¼‰

---

## ğŸ¯ é‡è¦æ•™è¨“èˆ‡æ³¨æ„äº‹é …

### 1. ç«¯å£ç®¡ç†

**âŒ éŒ¯èª¤åšæ³•**ï¼š
```json
{
  "scripts": {
    "docs:dev": "vitepress dev docs --port 5173"  // ä¸è¦å›ºå®šç«¯å£ï¼
  }
}
```

**âœ… æ­£ç¢ºåšæ³•**ï¼š
```json
{
  "scripts": {
    "docs:dev": "vitepress dev docs"  // è®“ç³»çµ±è‡ªå‹•åˆ†é…ç«¯å£
  }
}
```

**åŸå› **ï¼š
- ç«¯å£å¯èƒ½è¢«å…¶ä»–æ‡‰ç”¨ä½”ç”¨
- VitePress æœƒè‡ªå‹•å°‹æ‰¾å¯ç”¨ç«¯å£ï¼ˆ5173 â†’ 5174 â†’ 5175...ï¼‰
- å›ºå®šç«¯å£æœƒå°è‡´è¡çªå’Œå•Ÿå‹•å¤±æ•—

**è¨˜æ†¶è¦å‰‡**ï¼š
- ğŸš« **çµ•å°ç¦æ­¢**ä½¿ç”¨ `kill`ã€`lsof`ã€`pkill` æ¸…ç†ç«¯å£
- ğŸš« **çµ•å°ç¦æ­¢**åœ¨é…ç½®ä¸­å¯«æ­»ç«¯å£è™Ÿ
- âœ… è®“é–‹ç™¼ä¼ºæœå™¨è‡ªå‹•è™•ç†ç«¯å£åˆ†é…

### 2. æ¨¡å¡Šç³»çµ±é…ç½®

**å¿…é ˆåœ¨ `package.json` ä¸­æ·»åŠ **ï¼š
```json
{
  "type": "module"
}
```

**åŸå› **ï¼š
- VitePress 1.6.4+ æ˜¯ ESM-only æ¨¡å¡Š
- æ²’æœ‰é€™å€‹é…ç½®æœƒå°è‡´å•Ÿå‹•éŒ¯èª¤
- é…ç½®æ–‡ä»¶éœ€è¦ä½¿ç”¨ ESM èªæ³•ï¼ˆ`import.meta.url` è€Œé `__dirname`ï¼‰

### 3. Config æ–‡ä»¶ä¸­çš„ `__dirname` è™•ç†

**åœ¨ ESM æ¨¡å¼ä¸‹éœ€è¦æ‰‹å‹•å®šç¾©**ï¼š
```typescript
import { fileURLToPath } from 'url'
import { dirname } from 'path'

const __filename = fileURLToPath(import.meta.url)
const __dirname = dirname(__filename)
```

### 4. Markdown æ–‡ä»¶æ³¨æ„äº‹é …

**å¯èƒ½å°è‡´ç·¨è­¯éŒ¯èª¤çš„å…§å®¹**ï¼š
- `<NOTE>`ã€`<ALIAS>`ã€`<ID>` ç­‰å°–æ‹¬è™ŸåŒ…è£¹çš„ä½”ä½ç¬¦
- URL ä¸­çš„ä¸‹åº•ç·šï¼ˆå¦‚ `43hzF0Y6R4u7VmcLrtn_5Q`ï¼‰åœ¨æŸäº›æƒ…æ³ä¸‹
- æœªé…å°çš„ `<` æˆ– `>` ç¬¦è™Ÿ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. **å…¨å±€æ–¹æ¡ˆ**ï¼šåœ¨é…ç½®ä¸­è¨­ç½® `markdown.html: false`ï¼ˆæ¨è–¦ï¼‰
2. **å±€éƒ¨æ–¹æ¡ˆ**ï¼šä½¿ç”¨ inline code åŒ…è£¹ï¼ˆå¦‚ `` `<NOTE>` ``ï¼‰
3. **ç‰¹å®šå€å¡Š**ï¼šä½¿ç”¨ v-pre å®¹å™¨ï¼ˆä¸æ¨è–¦ï¼Œå¤ªéº»ç…©ï¼‰

### 5. PlantUML è­¦å‘Šè™•ç†

**å•é¡Œ**ï¼š
```
The language 'plantuml' is not loaded, falling back to 'txt' for syntax highlighting.
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```markdown
# åŸæœ¬ï¼ˆæœƒæœ‰è­¦å‘Šï¼‰
```plantuml
@startuml
...
@enduml
```

# ä¿®æ”¹ç‚ºï¼ˆç„¡è­¦å‘Šï¼‰
```text
@startuml
...
@enduml
```
```

---

## ğŸ”§ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### Q1: é é¢é¡¯ç¤ºç©ºç™½æˆ–éŒ¯èª¤

**ç—‡ç‹€**ï¼šç€è¦½å™¨é¡¯ç¤ºéŒ¯èª¤é é¢ï¼Œçµ‚ç«¯é¡¯ç¤º `Element is missing end tag`

**è¨ºæ–·æ­¥é©Ÿ**ï¼š
1. æª¢æŸ¥çµ‚ç«¯éŒ¯èª¤è¨Šæ¯ï¼Œæ‰¾å‡ºå•é¡Œæ–‡ä»¶å’Œè¡Œè™Ÿ
2. æŸ¥çœ‹è©²è¡Œæ˜¯å¦æœ‰ `<...>` æ ¼å¼çš„å…§å®¹
3. ç¢ºèª `config.ts` ä¸­æ˜¯å¦è¨­ç½®äº† `markdown.html: false`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// docs/.vitepress/config.ts
export default defineConfig({
  markdown: {
    html: false  // æ·»åŠ é€™ä¸€è¡Œ
  }
})
```

### Q2: ä¿®æ”¹é…ç½®å¾Œæ²’æœ‰ç”Ÿæ•ˆ

**è§£æ±ºæ­¥é©Ÿ**ï¼š
1. æ¸…ç†ç·©å­˜ï¼š
   ```bash
   rm -rf docs/.vitepress/cache docs/.vitepress/dist node_modules/.vite
   ```
2. é‡å•Ÿé–‹ç™¼ä¼ºæœå™¨ï¼ˆé…ç½®æ–‡ä»¶ä¿®æ”¹éœ€è¦é‡å•Ÿï¼‰
3. å¼·åˆ¶åˆ·æ–°ç€è¦½å™¨ï¼ˆCmd/Ctrl + Shift + Rï¼‰

### Q3: å´é‚Šæ¬„æ²’æœ‰é¡¯ç¤ºæ–°æ–‡ä»¶

**åŸå› **ï¼šå´é‚Šæ¬„é…ç½®ä½¿ç”¨äº† `generateSidebar()` å‡½æ•¸ï¼Œåœ¨å•Ÿå‹•æ™‚åŸ·è¡Œ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- é‡å•Ÿé–‹ç™¼ä¼ºæœå™¨ï¼ˆé…ç½®æ–‡ä»¶æœƒé‡æ–°åŸ·è¡Œï¼‰
- æˆ–è€…æ”¹ç”¨å‹•æ…‹ç”Ÿæˆå´é‚Šæ¬„çš„æ–¹å¼

### Q4: é¦–é æ¨£å¼ç•°å¸¸

**æª¢æŸ¥é …ç›®**ï¼š
1. `docs/index.md` çš„ frontmatter æ˜¯å¦æ­£ç¢º
2. `layout: home` æ˜¯å¦è¨­ç½®
3. hero å’Œ features é…ç½®æ˜¯å¦å®Œæ•´

---

## ğŸ“ ç›®éŒ„çµæ§‹

```
test-hedgedoc/
â”œâ”€â”€ docs/                          # æ–‡æª”æ ¹ç›®éŒ„
â”‚   â”œâ”€â”€ .vitepress/               # VitePress é…ç½®ç›®éŒ„
â”‚   â”‚   â”œâ”€â”€ config.ts            # ä¸»é…ç½®æ–‡ä»¶ âš ï¸ é‡è¦
â”‚   â”‚   â”œâ”€â”€ cache/               # å¿«å–ï¼ˆè‡ªå‹•ç”Ÿæˆï¼Œéœ€ gitignoreï¼‰
â”‚   â”‚   â””â”€â”€ dist/                # å»ºç½®è¼¸å‡ºï¼ˆè‡ªå‹•ç”Ÿæˆï¼Œéœ€ gitignoreï¼‰
â”‚   â”œâ”€â”€ index.md                 # é¦–é 
â”‚   â”œâ”€â”€ archive/                 # æ­¸æª”æ–‡ä»¶ç›®éŒ„
â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ VERIFICATION-REPORT.md   # å„ç¨®æ–‡æª”
â”‚   â”œâ”€â”€ STANDARD-OPERATION-GUIDE.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json                 # å¿…é ˆåŒ…å« "type": "module"
â”œâ”€â”€ .gitignore                   # éœ€è¦å¿½ç•¥ cacheã€dist ç­‰
â””â”€â”€ docs-README.md              # ä½¿ç”¨èªªæ˜
```

### è‡ªå‹•æƒææ©Ÿåˆ¶

**åŠŸèƒ½**ï¼š`generateSidebar()` å‡½æ•¸æœƒè‡ªå‹•æƒæ `docs/` ç›®éŒ„

**è¦å‰‡**ï¼š
- æ ¹ç›®éŒ„çš„ `.md` æ–‡ä»¶ï¼ˆé™¤äº† `index.md`ï¼‰â†’ ã€Œæ–‡æª”ã€åˆ†é¡
- å­ç›®éŒ„çš„ `.md` æ–‡ä»¶ â†’ ä»¥ç›®éŒ„åç‚ºåˆ†é¡
- è‡ªå‹•ç”Ÿæˆå°èˆªçµæ§‹

**æ·»åŠ æ–°æ–‡ä»¶**ï¼š
1. åœ¨ `docs/` ç›®éŒ„ä¸‹å‰µå»º `.md` æ–‡ä»¶
2. é‡å•Ÿé–‹ç™¼ä¼ºæœå™¨
3. æ–°æ–‡ä»¶æœƒè‡ªå‹•å‡ºç¾åœ¨å´é‚Šæ¬„

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æº–å‚™å·¥ä½œ

```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run docs:build

# è¼¸å‡ºä½ç½®ï¼šdocs/.vitepress/dist
```

### éƒ¨ç½²åˆ° Vercel

1. æ¨é€åˆ° GitHub
2. åœ¨ Vercel åŒ¯å…¥å°ˆæ¡ˆ
3. è¨­ç½®ï¼š
   - **Build Command**: `npm run docs:build`
   - **Output Directory**: `docs/.vitepress/dist`
   - **Install Command**: `npm install`

### éƒ¨ç½²åˆ° Netlify

1. æ¨é€åˆ° GitHub
2. åœ¨ Netlify åŒ¯å…¥å°ˆæ¡ˆ
3. è¨­ç½®ï¼š
   - **Build command**: `npm run docs:build`
   - **Publish directory**: `docs/.vitepress/dist`

### éƒ¨ç½²åˆ° GitHub Pages

```bash
# å»ºç½®
npm run docs:build

# éƒ¨ç½²
cd docs/.vitepress/dist
git init
git add -A
git commit -m 'deploy'
git push -f git@github.com:username/repo.git main:gh-pages
```

---

## ğŸ“ ç¶­è­·æª¢æŸ¥æ¸…å–®

### å®šæœŸæª¢æŸ¥

- [ ] VitePress ç‰ˆæœ¬æ˜¯å¦æœ‰æ›´æ–°
- [ ] Node.js ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
- [ ] ä¾è³´å¥—ä»¶æ˜¯å¦æœ‰å®‰å…¨æ›´æ–°

### æ·»åŠ æ–°æ–‡ä»¶æ™‚

- [ ] ç¢ºèªæ–‡ä»¶åä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦
- [ ] æª¢æŸ¥æ˜¯å¦æœ‰æœªé–‰åˆçš„æ¨™ç±¤
- [ ] ä½¿ç”¨ inline code åŒ…è£¹ç‰¹æ®Šç¬¦è™Ÿ
- [ ] æ¸¬è©¦åœ¨ç€è¦½å™¨ä¸­æ˜¯å¦æ­£å¸¸é¡¯ç¤º

### ä¿®æ”¹é…ç½®å¾Œ

- [ ] æ¸…ç†ç·©å­˜
- [ ] é‡å•Ÿé–‹ç™¼ä¼ºæœå™¨
- [ ] æ¸¬è©¦æ‰€æœ‰ä¸»è¦é é¢
- [ ] æª¢æŸ¥çµ‚ç«¯æ˜¯å¦æœ‰éŒ¯èª¤

---

## ğŸ” é™¤éŒ¯æŠ€å·§

### 1. æª¢æŸ¥çµ‚ç«¯è¼¸å‡º

é–‹ç™¼ä¼ºæœå™¨çš„çµ‚ç«¯æœƒé¡¯ç¤ºï¼š
- ç·¨è­¯éŒ¯èª¤çš„æ–‡ä»¶åå’Œè¡Œè™Ÿ
- è­¦å‘Šè¨Šæ¯
- å¯¦éš›é‹è¡Œçš„ç«¯å£è™Ÿ

### 2. ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·

- Consoleï¼šæŸ¥çœ‹ JavaScript éŒ¯èª¤
- Networkï¼šæª¢æŸ¥è³‡æºè¼‰å…¥ç‹€æ³
- Elementsï¼šæª¢æŸ¥å¯¦éš›æ¸²æŸ“çš„ HTML

### 3. æ¸¬è©¦å‘½ä»¤

```bash
# æª¢æŸ¥é é¢æ˜¯å¦æ­£å¸¸
curl -s http://localhost:5174/VERIFICATION-REPORT | head -20

# æŸ¥çœ‹çµ‚ç«¯éŒ¯èª¤
# ç›´æ¥è§€å¯Ÿé–‹ç™¼ä¼ºæœå™¨çš„è¼¸å‡º

# æ¸…ç†ä¸¦é‡å»º
rm -rf docs/.vitepress/cache docs/.vitepress/dist node_modules/.vite
npm run docs:dev
```

---

## ğŸ“š åƒè€ƒè³‡æº

- [VitePress å®˜æ–¹æ–‡æª”](https://vitepress.dev/)
- [VitePress GitHub](https://github.com/vuejs/vitepress)
- [Markdown-it æ–‡æª”](https://markdown-it.github.io/)
- [Vue 3 æ–‡æª”](https://vuejs.org/)

---

## ğŸ“ æ ¸å¿ƒæ•™è¨“ç¸½çµ

1. **æ°¸é ä¸è¦å›ºå®šç«¯å£** - è®“ç³»çµ±è‡ªå‹•åˆ†é…
2. **æ°¸é ä¸è¦æ¸…ç†å…¶ä»–æ‡‰ç”¨çš„ç«¯å£** - å¯èƒ½å½±éŸ¿åˆ°å…¶ä»–æœå‹™
3. **ä½¿ç”¨ `markdown.html: false`** - é¿å… Vue èª¤åˆ¤ markdown å…§å®¹
4. **ä½¿ç”¨ ESM æ¨¡å¼** - åœ¨ package.json ä¸­è¨­ç½® `"type": "module"`
5. **é…ç½®ä¿®æ”¹éœ€è¦é‡å•Ÿ** - VitePress ä¸æœƒè‡ªå‹•é‡è¼‰é…ç½®æ–‡ä»¶
6. **æ¸¬è©¦æ‰æ˜¯çœŸç†** - ä¿®æ”¹å¾Œå¿…é ˆå¯¦éš›è¨ªå•é©—è­‰ï¼Œä¸èƒ½å‡è¨­æˆåŠŸ

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-06  
**ç¶­è­·è€…**ï¼šAI Assistant

